<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>blak notebook™</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      font-size: 16px;
      word-wrap: break-word;
      margin: 0;
      padding: 0;
      background-color: #171f1f;
      color: #F7EDED;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      word-break: break-word;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;  /* This ensures vertical positioning starts at the top */
      padding: 0 5vw; /* Horizontal centering */
    }

    #terminal {
      width: 40vw; /* Default terminal width for larger screens */
      height: 30vw; /* Default terminal height for larger screens */
      background-color: #171f1f;
      color: #F7EDED;
      font-size: 2.141vw;
      line-height: 1.4;
      padding: 5%; /* Set padding for inner text */
      overflow-y: auto;
      margin-top: 5vw;
      white-space: pre-wrap;
      word-wrap: break-word;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    #terminal-text {
      width: 100%;
      text-align: left;
      padding-left: 5%; /* Ensure text padding on left */
      padding-right: 5%; /* Ensure text padding on right */
    }

    .green {
      color: #00cc66;
    }

    .blue-link {
      color: #0357FC;
      text-decoration: none;
    }

    .blue-link:hover {
      color: #BA04A7;
    }

    .cursor {
      display: inline-block;
      width: 1ch;
      color: #00cc66;
    }

    .blink {
      animation: blink 1s steps(1) infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      50.1%, 100% { opacity: 0; }
    }

    /* Mobile and tablet adjustments */
    @media (max-width: 768px) {
      body {
        padding: 0 5vw; /* Adjust the margin for mobile */
        padding-top: 5vh; /* 5% margin at the top */
      }

      #terminal {
        width: 90vw; /* Adjust terminal width for mobile */
        height: 100vw; /* Square terminal for mobile */
        margin-top: 0vh; /* Top margin of 5% of the viewport height */
        padding: 5%; /* Padding inside terminal */
        font-size: calc(0.2vw + 1vh); /* Adjust the font size dynamically based on viewport */
      }

      #terminal-text {
        padding-left: 5%; /* Maintain consistent padding on the left */
        padding-right: 5%; /* Maintain consistent padding on the right */
      }
    }

    /* Portrait Mode: When mobile is in portrait orientation */
    @media (orientation: portrait) and (max-width: 768px) {
      #terminal {
        width: 90vw; /* Terminal takes 90% of the screen width */
        height: 60vw; /* Square terminal */
        margin-top: 0vh; /* Top margin set to 5% of screen height */
        padding: 5%; /* 5% padding on all sides */
        font-size: 4.3vw; /* Dynamic font size for portrait */
      }
    }

    /* Landscape Mode: When mobile is in landscape orientation */
    @media (orientation: landscape) and (max-width: 768px) {
      #terminal {
        width: 50vw; /* Terminal width for landscape */
        height: 34vw; /* Adjust the height for landscape */
        margin-top: 2.5vh; /* Slight margin on top */
        padding: 5%; /* 5% padding on all sides */
        font-size: 2.67vw; /* Adjust font size for landscape */
      }

      #terminal-text {
        padding-left: 5%; /* Maintain consistent padding on the left */
        padding-right: 5%; /* Maintain consistent padding on the right */
      }
    }
  </style>
</head>
<body>
  <div id="terminal">
    <div id="terminal-text"></div>
  </div>

  <script>
    const terminalText = document.getElementById('terminal-text');

    const lines = [
      { text: 'b:\\games\\horror\\document>dir', className: 'green' },
      { text: '............................' },
      { text: '???,??? bytes [document.rar]' },
      { text: 'blak notebook™ © 2025 [game]' },
      { text: 'analog horror document ttrpg' },
      { text: '............................' },
      { text: 'download_document.rar  [ ↓ ]', className: 'blue-link' },
      { text: '............................' }
    ];

    const downloadHref = "https://www.dropbox.com/scl/fi/f5iebmpz1u4no4w8kjdvb/document.rar?rlkey=yew6c7vpnhhgzjc313i6nt76p&dl=1";

    let i = 0;

    // Function to simulate a glitch effect on random characters in any line
    function glitchTextEffect(div, originalText) {
      const randomPos = Math.floor(Math.random() * originalText.length);
      const charAtPos = originalText[randomPos];

      if (charAtPos === '.' || charAtPos === '0') {
        return;  // Skip changing dots and the number 0
      }

      // Randomly choose from uppercase, lowercase, digits, and symbols
      const randomChar = String.fromCharCode(Math.floor(Math.random() * 94) + 33); // ASCII range from 33 (!) to 126 (~)

      const textArray = originalText.split('');
      textArray[randomPos] = randomChar;
      div.textContent = textArray.join('');

      const glitchDuration = Math.floor(Math.random() * 1500) + 500;
      setTimeout(() => {
        div.textContent = originalText;
      }, glitchDuration);
    }

    function typeLine({ text, className = '' }, callback) {
      const div = document.createElement('div');
      if (className) div.classList.add(className);
      terminalText.appendChild(div);

      let j = 0;
      const interval = setInterval(() => {
        div.textContent += text[j];
        j++;

        if (j >= text.length) {
          clearInterval(interval);
          if (text.includes("download_document.rar")) {
            const a = document.createElement('a');
            a.href = downloadHref;
            a.className = 'blue-link';
            a.textContent = 'download_document.rar  [ ↓ ]';
            div.innerHTML = '';
            div.appendChild(a);
          }
          callback();
        }
      }, 30); // Adjust delay between characters
    }

    function typeAllLines() {
      const delayBeforeDownload = 1000;

      if (i < lines.length) {
        setTimeout(() => {
          typeLine(lines[i], () => {
            i++;
            typeAllLines();
          });
        }, (i === 6 ? delayBeforeDownload : 0));
      } else {
        const cursorDiv = document.createElement('div');
        cursorDiv.classList.add('green');

        const prompt = document.createElement('span');
        prompt.textContent = 'b:>';
        cursorDiv.appendChild(prompt);

        const blinkingCursor = document.createElement('span');
        blinkingCursor.className = 'cursor blink';
        blinkingCursor.textContent = '_';
        cursorDiv.appendChild(blinkingCursor);

        terminalText.appendChild(cursorDiv);
      }
    }

    // Glitch every 5 seconds on all lines (excluding the prompt and cursor)
    function startGlitch() {
      glitchInterval = setInterval(() => {
        const allDivs = terminalText.getElementsByTagName('div'); // Get all the divs (lines)
        for (let div of allDivs) {
          if (div.textContent.length > 0 && !div.textContent.includes('b:>') && !div.textContent.includes('_')) {
            glitchTextEffect(div, div.textContent);  // Apply glitch effect on each line except b:> and _ 
          }
        }
      }, 5000);  // Trigger glitch every 5 seconds
    }

    typeAllLines();
    startGlitch();  // Start glitch effect after typing starts
  </script>
</body>
</html>
